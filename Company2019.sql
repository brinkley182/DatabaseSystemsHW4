/*
	company2019.sql
	Eric J. Schwabe
	CSC 355 Spring 2019

	Script to define and populate the example database
	COMPANY, modified from Chapter 5 of Elmasri and Navathe's
	Fundamentals of Database Systems...
*/

-- drop tables

DROP TABLE EMPLOYEE CASCADE CONSTRAINTS;
DROP TABLE DEPARTMENT CASCADE CONSTRAINTS;
DROP TABLE PROJECT CASCADE CONSTRAINTS;
DROP TABLE ASSIGNMENT CASCADE CONSTRAINTS;
DROP TABLE DEPENDENT CASCADE CONSTRAINTS;

-- create and populate tables

CREATE TABLE DEPARTMENT
(
	DName		VARCHAR(20),
	DNo		NUMBER(1),
	
	PRIMARY KEY (DNo)
);

INSERT INTO DEPARTMENT VALUES ('Administration', 1);
INSERT INTO DEPARTMENT VALUES ('Research', 2);
INSERT INTO DEPARTMENT VALUES ('Development', 3);
INSERT INTO DEPARTMENT VALUES ('Marketing', 4);

CREATE TABLE EMPLOYEE
(
	First		VARCHAR(20),
	Last		VARCHAR(20),
	EID		CHAR(7),
	Gender		CHAR(1),
	Salary		NUMBER(8,2),
	DNo		NUMBER(1),
	SupervisorID	CHAR(7),
	
	PRIMARY KEY (EID),
		
	FOREIGN KEY (SupervisorID)
		REFERENCES EMPLOYEE (EID),

	FOREIGN KEY (DNo)
		REFERENCES DEPARTMENT (DNo)
);

INSERT INTO EMPLOYEE VALUES ('Susan', 'Sullivan', '1234567', 'F', 165000, 1, NULL);
INSERT INTO EMPLOYEE VALUES ('John', 'Washington', '8886655', 'M', 130000, 1, '1234567');
INSERT INTO EMPLOYEE VALUES ('James', 'Wallace', '9876543', 'M',123000, 1, '1234567');
INSERT INTO EMPLOYEE VALUES ('Manuel', 'Zelaya', '9973030', 'F', 137000, 1, '1234567');
INSERT INTO EMPLOYEE VALUES ('Ahmed', 'Salman', '9879877', 'M', 99000, 2, '8886655');
INSERT INTO EMPLOYEE VALUES ('Jim', 'Wong', '3334466', 'M', 91000, 2, '8886655');
INSERT INTO EMPLOYEE VALUES ('Maria', 'Ramirez', '7070113', 'F', 88000, 2, '8886655');
INSERT INTO EMPLOYEE VALUES ('Roberta', 'Vavolizza', '1112222', 'F', 86000, 3, '9876543');
INSERT INTO EMPLOYEE VALUES ('Ramesh', 'Narayanan', '6896896', 'M', 89000, 3, '9876543');
INSERT INTO EMPLOYEE VALUES ('Joanne', 'Aoki', '5432123', 'F', 56000, 4, '9973030');
INSERT INTO EMPLOYEE VALUES ('Steve', 'Jones', '2468246', 'M', 62000, 4, '9973030');
INSERT INTO EMPLOYEE VALUES ('Johnny', 'Tutone', '8675309', 'F', 56000, 4, '9973030');

CREATE TABLE PROJECT
(
	PName		VARCHAR(20),
	PNo		NUMBER(2),
	PCity		VARCHAR(20),

	PRIMARY KEY (PNo)
);

INSERT INTO PROJECT VALUES ('Automation', 11, 'Denver');
INSERT INTO PROJECT VALUES ('Training', 22, 'New York');
INSERT INTO PROJECT VALUES ('Public Relations', 33, 'Chicago');
INSERT INTO PROJECT VALUES ('Compliance', 44, 'Chicago');
INSERT INTO PROJECT VALUES ('ProductA', 55, 'Chicago');
INSERT INTO PROJECT VALUES ('ProductB', 66, 'New York');
INSERT INTO PROJECT VALUES ('ProductC', 77, 'New York');

CREATE TABLE ASSIGNMENT
(
	EmployeeID	CHAR(7),
	ProjectNo	NUMBER(2),
	Hours		NUMBER(2,0),
	
	PRIMARY KEY (EmployeeID, ProjectNo),

	FOREIGN KEY (EmployeeID)
		REFERENCES EMPLOYEE (EID),

	FOREIGN KEY (ProjectNo)
		REFERENCES PROJECT(PNo)
);


INSERT INTO ASSIGNMENT VALUES ('1234567', 11, 5);
INSERT INTO ASSIGNMENT VALUES ('8886655', 11, 20);
INSERT INTO ASSIGNMENT VALUES ('3334466', 11, 8);
INSERT INTO ASSIGNMENT VALUES ('2468246', 11, 10);
INSERT INTO ASSIGNMENT VALUES ('8675309', 11, 5);
INSERT INTO ASSIGNMENT VALUES ('1234567', 33, 10);
INSERT INTO ASSIGNMENT VALUES ('8886655', 33, 20);
INSERT INTO ASSIGNMENT VALUES ('9879877', 33, 15);
INSERT INTO ASSIGNMENT VALUES ('9973030', 33, 5);
INSERT INTO ASSIGNMENT VALUES ('9879877', 55, 2);
INSERT INTO ASSIGNMENT VALUES ('3334466', 55, 3);
INSERT INTO ASSIGNMENT VALUES ('7070113', 55, 5);
INSERT INTO ASSIGNMENT VALUES ('1234567', 55, 6);
INSERT INTO ASSIGNMENT VALUES ('9876543', 66, 5);
INSERT INTO ASSIGNMENT VALUES ('7070113', 66, 5);
INSERT INTO ASSIGNMENT VALUES ('1112222', 66, 12);
INSERT INTO ASSIGNMENT VALUES ('5432123', 66, 10);
INSERT INTO ASSIGNMENT VALUES ('8675309', 66, 13);
INSERT INTO ASSIGNMENT VALUES ('3334466', 66, 8);
INSERT INTO ASSIGNMENT VALUES ('9876543', 55, 5);
INSERT INTO ASSIGNMENT VALUES ('9876543', 77, 10);
INSERT INTO ASSIGNMENT VALUES ('9879877', 77, 20);
INSERT INTO ASSIGNMENT VALUES ('3334466', 77, 40);

CREATE TABLE DEPENDENT
(
	EmployeeID	CHAR(7),
	First		VARCHAR(20),
	Last		VARCHAR(20),
	Gender		CHAR(1),
	Relationship 	VARCHAR(8),
	Age		NUMBER(2),

	PRIMARY KEY (EmployeeID, First),

	FOREIGN KEY (EmployeeID)
		REFERENCES EMPLOYEE (EID)
);

INSERT INTO DEPENDENT VALUES ('3334466', 'Alice', 'Wong', 'F', 'Daughter', 16);
INSERT INTO DEPENDENT VALUES ('3334466', 'Jim', 'Wong', 'M','Son', 10);
INSERT INTO DEPENDENT VALUES ('3334466', 'Joy', 'Chen', 'F', 'Spouse', 30);
INSERT INTO DEPENDENT VALUES ('7070113', 'Alberto', 'Ramirez', 'M',  'Son', 8);
INSERT INTO DEPENDENT VALUES ('7070113', 'Luisa', 'Ramirez', 'F',  'Daughter', 6);
INSERT INTO DEPENDENT VALUES ('1234567', 'Jack', 'Baker', 'M',  'Son', 7);
INSERT INTO DEPENDENT VALUES ('1234567', 'Alice', 'Baker', 'F',  'Daughter', 2);
INSERT INTO DEPENDENT VALUES ('1234567', 'Paul', 'Baker', 'M', 'Spouse', 35);
INSERT INTO DEPENDENT VALUES ('5432123', 'Michael', 'Nakajima', 'M',  'Spouse', 42);
INSERT INTO DEPENDENT VALUES ('6896896', 'Priya', 'Narayanan', 'F', 'Daughter', 13);
INSERT INTO DEPENDENT VALUES ('2468246', 'Sandy', 'Jones', 'F', 'Daughter', 14);

-- display contents of tables

SELECT * FROM EMPLOYEE;
SELECT * FROM DEPARTMENT;
SELECT * FROM PROJECT;
SELECT * FROM ASSIGNMENT;
SELECT * FROM DEPENDENT;

COMMIT;

